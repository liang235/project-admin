import{_ as z}from"./index-m1hp8roE.js";import{d as A,s as D,r as p,U as R,D as $,A as j,e as B,j as i,P as M,g as s,Q as T,i as t,w as n,a,q as h,o as E,t as K,I as L,y as u,z as P,V as H,N as O}from"./index-H_c7H9_6.js";import{b as Q}from"./qiaotun-bpFoKuj1.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";function G(v){const r=new Date(v).getHours();return r<6?"凌晨好":r<9?"早上好":r<12?"上午好":r<14?"中午好":r<17?"下午好":r<19?"傍晚好":r<22?"晚上好":"夜里好"}const J={class:"login-wrap"},W={class:"login-box"},X={class:"login-banner"},Y=["src"],Z={class:"title"},ee={class:"flex-bar"},oe={style:{"margin-top":"20px","margin-bottom":"-20px","text-align":"center"}},te=A({name:"Login"}),se=Object.assign(te,{setup(v){const r=j(),V=h(),k=D(),S="Project-Admin",C=p("login"),m=p(!1),b=p(null),w=p(null),o=R({form:{account:localStorage.login_account||"",password:"",remember:!!localStorage.login_account},rules:{account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]}}),_=async()=>{await w.value.validate((c,e)=>{c?(m.value=!0,k.login(o.form).then(()=>{m.value=!1,o.form.remember?localStorage.setItem("login_account",o.form.account):localStorage.removeItem("login_account"),V.push(b.value);const{account:d}=localStorage,f=G(H().value);O.success(`${d}, ${f}`)}).catch(()=>{m.value=!1})):console.log("error submit!",e)})},x=c=>{o.form.account=c,o.form.password="123456",_()};return $(()=>{b.value=r.query.redirect??"/"}),(c,e)=>{const d=z,f=a("el-input"),y=a("el-form-item"),I=a("el-checkbox"),N=a("el-link"),g=a("el-button"),U=a("el-divider"),q=a("el-form");return E(),B("div",J,[i("div",W,[i("div",X,[i("img",{src:s(Q),class:"banner"},null,8,Y)]),M(t(q,{ref_key:"loginRef",ref:w,model:s(o).form,size:"large",rules:s(o).rules,class:"login-form"},{default:n(()=>[i("h3",Z,"欢迎来到 "+K(s(S))+" ! 👋🏻",1),t(y,{prop:"account"},{default:n(()=>[t(f,{modelValue:s(o).form.account,"onUpdate:modelValue":e[0]||(e[0]=l=>s(o).form.account=l),placeholder:"用户名"},{prefix:n(()=>[t(d,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),t(y,{prop:"password"},{default:n(()=>[t(f,{modelValue:s(o).form.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).form.password=l),placeholder:"密码","show-password":"",onKeyup:L(_,["enter"])},{prefix:n(()=>[t(d,{name:"password"})]),_:1},8,["modelValue"])]),_:1}),i("div",ee,[t(I,{modelValue:s(o).form.remember,"onUpdate:modelValue":e[2]||(e[2]=l=>s(o).form.remember=l)},{default:n(()=>e[5]||(e[5]=[u("记住我")])),_:1},8,["modelValue"]),t(N,{type:"primary",underline:!1},{default:n(()=>e[6]||(e[6]=[u("忘记密码了?")])),_:1})]),t(g,{loading:s(m),type:"primary",onClick:P(_,["prevent"])},{default:n(()=>e[7]||(e[7]=[u("登录")])),_:1},8,["loading"]),i("div",oe,[t(U,null,{default:n(()=>e[8]||(e[8]=[u("演示账号一键登录")])),_:1}),t(g,{type:"primary",size:"small",onClick:e[3]||(e[3]=l=>x("admin"))},{default:n(()=>e[9]||(e[9]=[u("admin")])),_:1}),t(g,{type:"success",size:"small",onClick:e[4]||(e[4]=l=>x("test"))},{default:n(()=>e[10]||(e[10]=[u("test")])),_:1})])]),_:1},8,["model","rules"]),[[T,s(C)==="login"]])])])}}}),ie=F(se,[["__scopeId","data-v-59ca66d8"]]);export{ie as default};
