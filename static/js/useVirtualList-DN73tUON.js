import{_ as k}from"./index-BqNn1QRp.js";import{_ as B}from"./index-m1hp8roE.js";import{_ as D}from"./index-ncGf53PB.js";import{r as a,az as C,at as I,e as _,j as g,i as e,w as o,aA as N,aB as S,g as n,aC as j,a as w,o as c,y as u,t as h,au as z}from"./index-H_c7H9_6.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={key:0,class:"loading"},E={key:1,class:"loading"},H={__name:"useVirtualList",setup(M){const p=a(1),d=a(20),l=a([]),s=a(!1),m=a(!0),{list:b,containerProps:f,wrapperProps:y}=C(l,{itemHeight:40}),L=async()=>{if(s.value||!m.value)return;s.value=!0,await new Promise(t=>{setTimeout(t,1e3)});const{data:i}=await z(`http://jsonplaceholder.typicode.com/posts?_page=${p.value}&_limit=${d.value}`);i.length<d.value&&(m.value=!1),l.value=[...l.value,...i],p.value++,s.value=!1};return I(f.ref,async()=>{await L()},{distance:15}),(i,t)=>{const P=D,v=w("el-table-column"),V=w("el-table"),x=B,$=k;return c(),_("div",j(n(f),{class:"useVirtualList"}),[g("div",N(S(n(y))),[e(P,{title:"欢迎使用 useInfiniteScroll"},{content:o(()=>t[0]||(t[0]=[g("p",null," 当有大量数据生成DOM并渲染时，界面会非常耗时且卡顿。通常会使用 virtual list 来解决问题，virtual list 原理是只渲染可见区域，非可见区域不渲染 ",-1)])),_:1}),e($,{title:"虚拟加载"},{default:o(()=>[e(V,{data:n(b),border:""},{default:o(()=>[e(v,{prop:"id",label:"id"},{default:o(r=>[u(h(r.row.data.id),1)]),_:1}),e(v,{prop:"title",label:"title"},{default:o(r=>[u(h(r.row.data.title),1)]),_:1})]),_:1},8,["data"]),n(s)?(c(),_("div",A,[e(x,{name:"ele-loading"}),t[1]||(t[1]=u("请求更多数据操作中"))])):(c(),_("div",E,"暂无更多数据"))]),_:1})],16)],16)}}},J=T(H,[["__scopeId","data-v-18855af7"]]);export{J as default};
