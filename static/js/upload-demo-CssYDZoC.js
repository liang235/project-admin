import{_ as P}from"./index-m1hp8roE.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as U,a as g,b as V,o as m,w as $,j as o,i as a,y as T,e as _,f as z,N as w,r as C,P as N,F as q,k as D,m as b,Q as O,n as A,g as f,z as L,J as R}from"./index-H_c7H9_6.js";import{_ as J}from"./index-BqNn1QRp.js";import{_ as Q}from"./index-ncGf53PB.js";const H={class:"slot"},K={key:0,class:"el-upload__tip"},W={style:{display:"inline-block"}},X=U({name:"FileUpload"}),Y=Object.assign(X,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},size:{type:Number,default:2},max:{type:Number,default:3},files:{type:Array,default:()=>[]},notip:{type:Boolean,default:!1},drag:{type:Boolean,default:!0},ext:{type:Array,default:()=>["zip","rar"]}},emits:["onSuccess"],setup(e,{emit:y}){const s=e,h=y,t=n=>{const p=n.name.split(".").at(-1),v=s.ext.includes(p),r=n.size/1024/1024<s.size;return v||w.error(`上传文件只支持 ${s.ext.join(" / ")} 格式！`),r||w.error(`上传文件大小不能超过 ${s.size}MB！`),v&&r},x=()=>{w.warning("文件上传超过限制")},S=(n,c,p)=>{h("onSuccess",n,c,p)};return(n,c)=>{const p=P,v=g("el-alert"),r=g("el-upload");return m(),V(r,{headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":t,"on-exceed":x,"on-success":S,"file-list":e.files,limit:e.max,drag:e.drag},{tip:$(()=>[e.notip?z("",!0):(m(),_("div",K,[o("div",W,[a(v,{title:`上传文件支持 ${e.ext.join(" / ")} 格式，单个文件大小不超过 ${e.size}MB，且文件数量不超过 ${e.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:$(()=>[o("div",H,[a(p,{name:"ele-upload-filled",class:"el-icon--upload"}),c[0]||(c[0]=o("div",{class:"el-upload__text"},[T("将文件拖到此处，或"),o("em",null,"点击上传")],-1))])]),_:1},8,["headers","action","data","name","file-list","limit","drag"])}}}),Z=E(Y,[["__scopeId","data-v-b8abbaf3"]]),ee={class:"upload-container"},te={class:"mask"},ae={class:"actions"},le=["onClick"],ie=["onClick"],ne=["onClick"],se=["onClick"],oe={key:0,class:"el-upload__tip"},ce={style:{display:"inline-block"}},re=U({name:"ImagesUpload"}),ue=Object.assign(re,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:Array,default:()=>[]},max:{type:Number,default:3},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp","jpeg"]}},emits:["update:url","onSuccess"],setup(e,{emit:y}){const s=e,h=y,t=C({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function x(l){t.value.dialogImageIndex=l,t.value.imageViewerVisible=!0}function S(){t.value.imageViewerVisible=!1}function n(l){const{url:u}=s;u.splice(l,1),h("update:url",u)}function c(l,u){const{url:i}=s;u==="left"&&l!==0&&(i[l]=i.splice(l-1,1,i[l])[0]),u==="right"&&l!==i.length-1&&(i[l]=i.splice(l+1,1,i[l])[0]),h("update:url",i)}const p=l=>{const i=l.name.split(".").at(-1),d=s.ext.includes(i),j=l.size/1024/1024<s.size;return d||w.error(`上传图片只支持 ${s.ext.join(" / ")} 格式！`),j||w.error(`上传图片大小不能超过 ${s.size}MB！`),d&&j&&(t.value.progress.preview=URL.createObjectURL(l)),d&&j},v=l=>{t.value.progress.percent=~~l.percent},r=l=>{t.value.progress.preview="",t.value.progress.percent=0,h("onSuccess",l)};return(l,u)=>{const i=g("el-image"),d=P,j=g("el-progress"),B=g("el-upload"),I=g("el-alert"),F=g("el-image-viewer");return m(),_("div",ee,[(m(!0),_(q,null,D(e.url,(G,k)=>(m(),_("div",{key:k,class:"images"},[k<e.max?(m(),V(i,{key:0,src:G,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):z("",!0),o("div",te,[o("div",ae,[o("span",{title:"预览",onClick:M=>x(k)},[a(d,{name:"ele-zoom-in"})],8,le),o("span",{title:"移除",onClick:M=>n(k)},[a(d,{name:"ele-delete"})],8,ie),N(o("span",{title:"左移",class:A({disabled:k===0}),onClick:M=>c(k,"left")},[a(d,{name:"ele-back"})],10,ne),[[O,e.url.length>1]]),N(o("span",{title:"右移",class:A({disabled:k===e.url.length-1}),onClick:M=>c(k,"right")},[a(d,{name:"ele-right"})],10,se),[[O,e.url.length>1]])])])]))),128)),N(a(B,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":p,"on-progress":v,"on-success":r,drag:"",class:"images-upload"},{default:$(()=>[o("div",{class:"image-slot",style:b(`width:${e.width}px;height:${e.height}px;`)},[a(d,{name:"ele-plus"})],4),N(o("div",{class:"progress",style:b(`width:${e.width}px;height:${e.height}px;`)},[a(i,{src:f(t).progress.preview,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),a(j,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:f(t).progress.percent},null,8,["width","percentage"])],4),[[O,f(t).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[O,e.url.length<e.max]]),e.notip?z("",!0):(m(),_("div",oe,[o("div",ce,[a(I,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),f(t).imageViewerVisible?(m(),V(F,{key:1,"url-list":e.url,"initial-index":f(t).dialogImageIndex,teleported:!0,onClose:S},null,8,["url-list","initial-index"])):z("",!0)])}}}),de=E(ue,[["__scopeId","data-v-bdbb117a"]]),me={class:"upload-container"},pe={key:1,class:"image"},ge={class:"mask"},fe={class:"actions"},he={key:0,class:"el-upload__tip"},ye={style:{display:"inline-block"}},ve=U({name:"ImageUpload"}),we=Object.assign(ve,{props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:String,default:""},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp","jpeg"]}},emits:["update:url","onSuccess"],setup(e,{emit:y}){const s=e,h=y,t=C({imageViewerVisible:!1,progress:{preview:"",percent:0}});function x(){t.value.imageViewerVisible=!0}function S(){t.value.imageViewerVisible=!1}function n(){h("update:url","")}const c=r=>{const u=r.name.split(".").at(-1),i=s.ext.includes(u),d=r.size/1024/1024<s.size;return i||w.error(`上传图片只支持 ${s.ext.join(" / ")} 格式！`),d||w.error(`上传图片大小不能超过 ${s.size}MB！`),i&&d&&(t.value.progress.preview=URL.createObjectURL(r)),i&&d},p=r=>{t.value.progress.percent=~~r.percent},v=r=>{t.value.progress.preview="",t.value.progress.percent=0,h("onSuccess",r)};return(r,l)=>{const u=P,i=g("el-image"),d=g("el-progress"),j=g("el-upload"),B=g("el-alert"),I=g("el-image-viewer");return m(),_("div",me,[a(j,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":c,"on-progress":p,"on-success":v,drag:"",class:"image-upload"},{default:$(()=>[e.url===""?(m(),V(i,{key:0,src:e.url===""?e.placeholder:e.url,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},{error:$(()=>[o("div",{class:"image-slot",style:b(`width:${e.width}px;height:${e.height}px;`)},[a(u,{name:"ele-plus"})],4)]),_:1},8,["src","style"])):(m(),_("div",pe,[a(i,{src:e.url,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),o("div",ge,[o("div",fe,[o("span",{title:"预览",onClick:L(x,["stop"])},[a(u,{name:"ele-zoom-in"})]),o("span",{title:"移除",onClick:L(n,["stop"])},[a(u,{name:"ele-delete"})])])])])),N(o("div",{class:"progress",style:b(`width:${e.width}px;height:${e.height}px;`)},[a(i,{src:f(t).progress.preview,style:b(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),a(d,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:f(t).progress.percent},null,8,["width","percentage"])],4),[[O,e.url===""&&f(t).progress.percent]])]),_:1},8,["headers","action","data","name"]),e.notip?z("",!0):(m(),_("div",he,[o("div",ye,[a(B,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，且图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),f(t).imageViewerVisible?(m(),V(I,{key:1,"url-list":[e.url],teleported:!0,onClose:S},null,8,["url-list"])):z("",!0)])}}}),be=E(we,[["__scopeId","data-v-6849133f"]]),$e={class:"components"},_e=U({name:"ComponentUpload"}),Ne=Object.assign(_e,{setup(e){const y=C("https://img2.baidu.com/it/u=3851318936,3356716855&fm=253&fmt=auto&app=138&f=PNG?w=500&h=582"),s=C(["https://img2.baidu.com/it/u=3851318936,3356716855&fm=253&fmt=auto&app=138&f=PNG?w=500&h=582","https://img2.baidu.com/it/u=3851318936,3356716855&fm=253&fmt=auto&app=138&f=PNG?w=500&h=582","https://img2.baidu.com/it/u=3851318936,3356716855&fm=253&fmt=auto&app=138&f=PNG?w=500&h=582"]),h=C([{name:"测试文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]),t=n=>{n.error===""?y.value=n.data.path:w.warning(n.error)},x=n=>{n.error===""?s.value.push(n.data.path):w.warning(n.error)},S=(n,c,p)=>{n.error===""?h.value.push({name:c.name,url:n.error===""?n.data.path:""}):(p.pop(),w.warning(n.error))};return(n,c)=>{const p=Q,v=be,r=J,l=de,u=Z;return m(),_("div",$e,[a(p,{title:"单图上传/多图上传/文件上传"},{content:$(()=>c[2]||(c[2]=[o("p",null,"ImageUpload / ImagesUpload / FileUpload",-1)])),_:1}),a(r,{title:"单图上传"},{default:$(()=>[a(v,{url:f(y),"onUpdate:url":c[0]||(c[0]=i=>R(y)?y.value=i:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:t},null,8,["url"])]),_:1}),a(r,{title:"多图上传（默认最多3张）"},{default:$(()=>[a(l,{url:f(s),"onUpdate:url":c[1]||(c[1]=i=>R(s)?s.value=i:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:x},null,8,["url"])]),_:1}),a(r,{title:"文件上传（默认最多3个）"},{default:$(()=>[a(u,{files:f(h),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/file",onOnSuccess:S},null,8,["files"])]),_:1})])}}});export{Ne as default};
